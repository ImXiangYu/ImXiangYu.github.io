### 语法部分

首先是lambda表达式的语法：

```cpp
[capture] (parameters) mutable -> return-type {statement}
```

`[capture]` 为捕获变量，可以为空。

`(parameters)` 为参数列表，`return-type` 为返回类型，`{statement}` 是函数主体。

举个简单的例子：

```cpp
auto f = [](int a, int b) -> int {
    return a + b;
};
cout << f(1, 2) << endl;
```

这段代码会输出`3` ，其中空的方括号代表不捕获任何变量，参数列表是两个`int` ，返回值也是`int` ， 同时将这个匿名函数赋给了`f` ，同时用`auto` 让编译器自行判断`f` 的类型。

这里的返回值也可以省略，让编译器自行推断，因此可以写成这样：

```cpp
auto f = [](int a, int b) {
    return a + b;
};
cout << f(1, 2) << endl;
```

### 变量捕获

`[capture]` 的部分是变量捕获，可以让我们的匿名函数访问或修改函数外部的变量。例如：

```cpp
int N = 100, M = 10;
auto g = [N, &M](int i) {
    M = 20;
    return N * i;
};
```

`[N, &M]` 不加引用符号是按值捕获，加了引用符号表示引用，可以修改外围变量的值。

以下是特殊用法：

- `[]` ，代表不捕获任何变量。
- `[&]`，代表引用捕获所有变量。
- `[=]`，代表按值捕获所有变量。
- `[&, =N]`，代表指定变量按值捕获，其余变量引用捕获。

### 捕获语句定义新变量

C++14之后可以在捕获语句中定义新的变量，例如：

```cpp
auto g = [N, &M, K = 5](int i) {};
```

可以定义新的变量并且初始化，这些变量无需出现在匿名函数之外。

### 参数列表支持auto类型

C++14之后，参数列表支持auto类型，例如：

```cpp
[](auto a, auto b) {return a + b;}
```

### 结语

在刷题时经常见到lambda表达式，实际上手发现确实简单好用。